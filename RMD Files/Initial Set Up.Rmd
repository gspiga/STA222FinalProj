---
title: "Initial Set Up"
author: "Gianni Spiga"
date: '2022-11-22'
output: 
  ioslides_presentation:
    widescreen: TRUE

---


# In the morning

```{r, message = FALSE, warning=FALSE}
library(survival)
library(KMsurv)
library(ggplot2)
library(ggpubr)
library(survminer)
library(plotly)
library(muhaz)
library(ggthemes)
```

## Getting up

```{r, fig.cap="Sample", echo = F}
#data(pneumon)
#ggplotly(ggplot(data = pneumon, aes(x = smoke)) + geom_histogram(stat = "count"))
```

# Setting Up Info for Analysis



# Loading in Data

```{r, echo=F}
# data(pneumon)
# head(pneumon)
# 
# #Check for NA
# any(is.na(pneumon))
# 
# #Check data type for each column
# sapply(pneumon, class)
# 
# # #We turn columns desired into factors
# # factor.cols <-
# #   c(
# #     "hospital",
# #     "urban",
# #     "alcohol",
# #     "smoke",
# #     "region",
# #     "poverty",
# #     "bweight",
# #     "race",
# #     "wmonth",
# #     "sfmonth"
# #   )
# # This will turn into factors 
# #pneumon[factor.cols] <- lapply(pneumon[factor.cols], as.factor)
# 
# #Check data conversion
# str(pneumon)
# 
# # Build the survival object
# pneu.surv <- Surv(time = pneumon$agepn, event = pneumon$hospital)

```
### Kaplan-Meier Curves 

```{r}
# # Kaplan Meier Curves on Region
# pneumon$urban <- as.factor(pneumon$urban)
# KMobj <- survfit(pneu.surv ~ 1, data = pneumon)
# 
# 
# 
# KMplot <- ggsurvplot(KMobj) + labs(title = "Time to Hospital by Region")
# ggplotly(KMplot[[1]])
# 
# coxph(pneu.surv ~ factor(race), data = pneumon)
```

```{r}
data(std)

any(is.na(std))

infect <- std$iinfct
surv_object <- Surv(time = std$time, event = std$rinfct)

KMobj <- survfit(surv_object ~ iinfct, data = std)

KMplot <- ggsurvplot(KMobj) + labs(title = "Kaplan-Meier Curves for Initial Infection Type") 
ggplotly(KMplot[[1]])
```