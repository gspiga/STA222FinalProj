---
title: "Initial Set Up"
author: "Gianni Spiga"
date: '2022-11-22'
output: 
  ioslides_presentation:
    widescreen: TRUE

---


# In the morning

```{r, message = FALSE, warning=FALSE}
library(survival)
library(KMsurv)
library(ggplot2)
library(ggpubr)
library(survminer)
library(plotly)
library(muhaz)
library(ggthemes)
```

## Getting up

```{r, fig.cap="Sample", echo = F}
data(pneumon)
#ggplotly(ggplot(data = pneumon, aes(x = smoke)) + geom_histogram(stat = "count"))
```
## Breakfast

- Eat eggs
- Drink coffee

# In the evening

## Dinner

- Eat spaghetti
- Drink wine

---

# Setting Up Info for Analysis



# Loading in Data

```{r, echo=F}
data(pneumon)
head(pneumon)

#Check for NA
any(is.na(pneumon))

#Check data type for each column
sapply(pneumon, class)

# We turn columns desired into factors
factor.cols <-
  c(
    "hospital",
    "urban",
    "alcohol",
    "smoke",
    "region",
    "poverty",
    "bweight",
    "race",
    "wmonth",
    "sfmonth"
  )
pneumon[factor.cols] <- lapply(pneumon[factor.cols], as.factor)

#Check data conversion
str(pneumon)

# Build the survival object
pneu.surv <- Surv(time = pneumon$chldage, event = pneumon$hospital)
```
### Kaplan-Meier Curves 

```{r}
# Kaplan Meier Curves on Region
KMobj <- survfit(pneu.surv ~ pneumon$urban, data = pneumon)

#KMplot <- ggsurvplot(KMobj) #+ labs(title = "Time to Hospital by Region")
#ggplotly(KMplot[[1]])
```